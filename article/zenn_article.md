# GCPの最新AI×クラウドで切り開く次世代AIエージェント開発：目標達成特化型AIエージェント「Task Trail」

---

## 概要

本記事では、Google が提供する最新の AI およびコンピューティング基盤を活用して構築したAIエージェントプロジェクトの開発背景・技術的ポイント、実装上の工夫や課題、そして今後の展望について紹介します。筆者が参加した「AI Agent Hackathon with Google Cloud」を通して得られた知見や、開発した**目標達成特化型AIエージェント「Task Trail」** を解説します。

---

## はじめに

近年、ChatGPTやClaude、Geminiをはじめとする「生成AI」が注目を集めていますが、さらに一歩進んで「AI エージェント」というコンセプトが広がりつつあります。これは、自然言語を理解し、ユーザーからの多様なリクエストを柔軟に処理できるだけでなく、外部サービスと連携してタスクを実行できるAIを備えた仕組みです。

今回参加した**AI Agent Hackathon with Google Cloud**では、Google Cloud が提供する最新技術のハンズオンやサポートを受けながら、短期間で AI エージェントを形にすることが目標でした。実際に以下のサービスを主に利用しながら、クラウド上でエージェントを開発しました。

本記事では、その参加背景と実際に取り組んだプロジェクトの概要、そして実装過程と学んだポイントを紹介します。

---

## プロジェクト概要

### 対象ユーザー像と課題

- 英語学習や資格取得など、学習計画の管理やモチベーション維持が課題となっている人
- 企業の研修担当者など、組織内で目標管理やタスク管理がなかなかできない人

### 課題へのソリューション

学習計画の管理やモチベーション維持や、組織内で目標管理やタスク管理がなかなかできないといった課題に対して、本システムのAIエージェントがサポートすることで解決します。
具体的には、画面で目標や仕事のプロジェクトを登録し、その進捗管理や必要なタスクの提案を AI エージェントが行います。たとえば「2025/2/11 までに TOEIC900点取得を目指したい」という要望を入力すると、学習計画や具体的な学習タスクの作成を自動でしてくれます。タスクはGoogleカレンダーに登録され、Googleカレンダーを見ながらタスクをこなしていくことができます。また、進捗によってはタスクの調整や変更もできるため、無理なく目標達成できます。


### 特徴

このAIエージェントは従来のChatGPTやGemini、Claudeのようなユーザーと対話するAIに加え、Googleカレンダーを使った目標達成のためのタスクを可視化できることが最大の特徴となっています。

### デモ動画


---

## 技術的アーキテクチャと実装の詳細

### システム構成

以下が本プロジェクトのシステム構成図です。図の各要素について説明します。

![システム構成図](./images/system_configuration_chart.png)

- **フロントエンド**: Flutter を使用したUI実装
- **認証基盤**: Firebase Authentication によるユーザー認証
- **バックエンド**: Cloud Run 上でホストされるサーバー
- **AI基盤**: Vertex AI API (Gemini 1.5 Flash) による言語モデル
- **データストア**: Cloud Firestore API でのデータ管理
- **外部連携**: Google カレンダー API との連携
- **イベント制御**: EventArc による非同期イベント処理

### 使用技術

開発に使用した主な技術スタックです：

#### プログラミング言語・フレームワーク
- **フロントエンド**: Flutter
- **バックエンド**: Python 3.11+
- **コンテナ化**: Docker / Docker Compose

#### クラウドサービス（Google Cloud）
- **コンピューティング**: Cloud Run
- **AI/ML**: Vertex AI API (Gemini 1.5 Flash)
- **データベース**: Cloud Firestore API
- **認証**: Firebase Authentication
- **イベント管理**: EventArc
- **外部API**: Google カレンダー API

#### 開発支援ツール
- **コミュニケーション**
  - Slack: チーム内連絡
  - Google Meet: オンラインミーティング
- **プロジェクト管理**
  - GitHub: コード管理
  - GitHub Issues: タスク管理
- **設計・計画**
  - Miro: ホワイトボード・システム設計

### バックエンド実装とクラウド連携

- **Docker / Docker Compose** でアプリケーションをコンテナ化し、**Cloud Run** にデプロイ。
- **Vertex AI API (Gemini 1.5 Flash)（※内容は暫定）** に問い合わせて学習計画の提案を生成。LLamaIndex を組み合わせることで、ユーザー固有のデータを取り込んだ RAG（Retrieval-Augmented Generation）を実装。
- **Firestore** や **Google カレンダー API** は必要な情報を保管・読み書きし、ユーザーの学習計画やスケジュールを管理。
- **Firebase Authentication** で認証処理を行い、認可されたユーザーのみが学習目標やタスクを登録・管理できるように設定。
- **EventArc** により、ユーザーの操作やイベントに応じてバックエンドが自動的にタスク更新や通知処理を行えるように。（**※内容は暫定。** EventArcはFirestoreへの書き込みをトリガーに動作するが、それがこのシステムにとって実際にどのようなメリットをもたらすかが近江ではわからない。）

### フロントエンド（Flutter）

- **Flutter** を使うことでWebとモバイルへ対応した。
- ユーザーが学習目標やタスクを登録すると、リクエストが Firestore経由でCloud Runに送信され、AI エージェントを呼び出してプランやアドバイスを受け取る。

## プロジェクト進行の仕方

私たちのチームではmiroを使い、アイディア出しからプロジェクト管理までの一連のフローを可視化しながらプロジェクト進行を行いました。このやり方によって、現在どこまでプロジェクトが進捗していて、何をする必要があるのかが目で見てわかるため、スムーズなプロジェクト進行をすることができました。

### アイデアの策定と目標設定

最初のフェーズでは、チーム全員でアイデアを出し合いました。ハッカソンの制約（短期間での開発・限られたリソース）を考慮し、実現可能性の高いMVPのプランを検討しました。候補として以下のようなアイデアが挙がりました。（良いと思ったアイディアにスタンプが押されています。）

その結果、「Googleカレンダーを使って目標達成や仕事のタスク管理が楽になるAIエージェント開発を行う」という共通の目標を定め、チーム全員で具体的な方向性を明確にしました。

![AIハッカソン計画 - アイデア](./images/aiHackathonPlanIdeas.jpg)

### 開発スケジュールとタスク管理

各メンバーが何ができるかやチームの課題を書き出し、各々がいつ作業できるかを洗い出して、プロジェクト提出期限までのスケジュールを立てました。メンバーのスキルセットの違いや作業できる時間が異なるため、このように課題を洗い出し、全員で解決策を考えやすいようにしたことでチーム内での連携がしやすかったです。

![AIハッカソン計画 - 開発方針議論](./images/aiHackathonPlanDevelopmentPolicyDiscussion.jpg)


### システムフローとデータベース構成

システムフローはシーケンス図で記載しました。ユーザーが学習目標やタスクを登録すると、Firestore経由でCloud Runにリクエストが送信され、AIエージェントが呼び出されて学習計画やアドバイスが提供されるという流れを示しています。

データベース構成は、Firestoreを使用してユーザーの学習計画やタスクを管理し、GoogleカレンダーAPIを使用してスケジュールを管理するという構成を示しています。

これらもmiroを使って見やすく表現できますし、開発時は今ここまでできていて、ここから先ができてないとマークをつけたり、あるいは、仕様説明を受ける際にも図を見ながら話が聞けるため、視覚的に理解しやすかったです。

![AIハッカソン計画 - Phase 2 完成図](./images/aiHackathonPlanPhase2FinalDesign.jpg)

![AIハッカソン計画 - Firestoreデータ設計](./images/aiHackathonPlanFirestoreDataDesign.jpg)

これらの図も含め、miroではプロジェクトの状況を一覧することができるため、スムーズにプロジェクトの状況を理解したりコミュニケーションを取るために役立ちました。

---

## 実装中の課題と解決策（※内容は暫定）

1. **AI 推論の処理負荷とコスト管理**

- Vertex AI API への呼び出しが増えるほどコストが上がる可能性がある。
- **対応**: 推論結果の一部をキャッシュし、頻出の問い合わせには再利用。

2. **権限管理の複雑化**

- Firestore や カレンダー API など、複数 API を扱うため IAM 設計が重要。
- **対応**: サービスアカウントを用途ごとに分割し、必要最小限の権限を付与。

3. **RAG（Retrieval-Augmented Generation）の品質向上**

- LLamaIndex で外部データを取り込みつつ、誤情報を減らす。
- **対応**: Document Store への格納データを定期的に見直し、モデルへのプロンプト設計を最適化。

---

## ハッカソン参加の感想と学び（※内容は暫定）

- **短期間での開発プロセス**: ハンズオンやプレゼンを経て、最小限の MVP を素早く構築。
- **Google Cloud の支援体制**: チュートリアルやドキュメントが充実しており、初めてのサービスもキャッチアップしやすかった。
- **チームビルディングとコラボレーション**: Flutter の知見があるメンバーと、バックエンドに知見のあるメンバー、AI モデルに強いメンバーが協業しスムーズに分担できた。

---

## まとめと今後の展望

今回のハッカソンでは、Docker / Docker Composeを使ったコンテナ化や、Cloud Runによるスケーラブルなデプロイ、Vertex AI API (Gemini 1.5 Flash) を活用した高精度の学習計画提案など、多彩なクラウド技術を組み合わせることで、短期間ながら次世代 AI エージェントのプロトタイプを構築できました。

今後の展望としては、AIエージェントとタスクの壁打ちをできるようにすることで、より個々のユーザーに最適化した目標達成特化型AIエージェントに仕上げて行きたいと思います。

### 今後の発展アイデア（※内容は暫定）

1. **タスク調整**: 進捗に従って柔軟にタスク調整してGoogleカレンダーに修正登録。
2. **外部サービス連携**: Google カレンダー以外のコラボレーションツールとの連動。
3. **コミュニティ機能**: 学習仲間との進捗共有や、目標達成を促す仕掛けづくり。

今後はこのようにTask Trailを発展させ、よりユーザーの目標達成にコミットできるAIエージェントを作り込んでいきたいと思います。
